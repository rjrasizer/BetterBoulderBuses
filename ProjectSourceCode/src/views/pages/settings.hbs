<div class="settings-page">

  <!-- Header -->
  <div class="settings-header">
    <div class="settings-tabs">

      <a href="/home" class="tab-btn back-btn">← Back</a>


      <a href="/settings?tab=profile"
         class="tab-btn {{#if (eq activeTab 'profile')}}active{{/if}}">
        Account
      </a>

      <a href="/settings?tab=notifications"
         class="tab-btn {{#if (eq activeTab 'notifications')}}active{{/if}}">
        Notifications
      </a>

      <a href="/settings?tab=help"
         class="tab-btn {{#if (eq activeTab 'help')}}active{{/if}}">
        Help
      </a>

      <a href="/logout" class="tab-btn logout-btn">Logout</a>

    </div>
  </div>

  <!-- Main Content -->
  <div class="settings-container">
    <div class="settings-card">

      {{!-- ========== ACCOUNT TAB ========== --}}
      {{#if (eq activeTab "profile")}}

      <h3 class="settings-title">Manage Account</h3>



      <form method="POST" action="/settings/profile/update" class="mb-4">

        <div class="mb-3">
          <label class="form-label">Username</label>
          <input 
            class="form-control bg-light"
            type="text"
            value="{{userData.username}}"
            disabled
          >
        </div>

        <div class="mb-3">
          <label class="form-label">Full Name</label>
          <input 
            type="text"
            name="name"
            class="form-control"
            placeholder="Enter your name"
            value="{{userData.name}}"
          >
        </div>

        <div class="mb-4">
          <label class="form-label">Email</label>
          <input 
            type="email"
            name="email"
            class="form-control"
            placeholder="Enter your email"
            value="{{userData.email}}"
          >
        </div>

        <button type="submit" class="btn btn-dark">
          Save Changes
        </button>
      </form>

      <div class="section-divider"></div>
      {{#if message}}
        <div class="alert {{#if error}}alert-danger{{else}}alert-success{{/if}}">
          {{message}}
        </div>
      {{/if}}
      <h5 class="settings-subtitle">Change Password</h5>

      <form method="POST" action="/settings/change-password">

        <div class="mb-3">
          <input 
            type="password" 
            name="currentPassword"
            class="form-control"
            placeholder="Current password"
            required
          >
        </div>

        <div class="mb-3">
          <input 
            type="password" 
            name="newPassword"
            class="form-control"
            placeholder="New password"
            required
          >
        </div>

        <div class="mb-4">
          <input 
            type="password" 
            name="confirmPassword"
            class="form-control"
            placeholder="Confirm new password"
            required
          >
        </div>

        <button type="submit" class="btn btn-outline-dark">
          Update Password
        </button>

      </form>

      {{/if}}

      {{!-- ========== NOTIFICATIONS TAB ========== --}}
      {{#if (eq activeTab "notifications")}}

      <h3 class="settings-title">Notifications</h3>

      <form method="POST" action="/settings/notifications/update">

        <div class="toggle-row">
          <div>
            <div class="toggle-title">Bus Arrival Alerts</div>
            <div class="toggle-desc">Get notified when your bus is close</div>
          </div>
          <input class="form-check-input" type="checkbox" name="busAlerts">
        </div>

        <div class="toggle-row">
          <div>
            <div class="toggle-title">Delay Notifications</div>
            <div class="toggle-desc">Be notified of service disruptions</div>
          </div>
          <input class="form-check-input" type="checkbox" name="delayAlerts">
        </div>

        <button type="submit" class="btn btn-dark">
          Save Notification Settings
        </button>

      </form>

      {{/if}}

      {{!-- ========== HELP TAB ========== --}}
      {{#if (eq activeTab "help")}}

      <h3 class="settings-title">Help & Support</h3>

      <div class="help-box mb-4">
        <div>• How do I track a bus?</div>
        <div>• Why is my bus delayed?</div>
        <div>• How do notifications work?</div>
      </div>

      <a href="mailto:support@betterboulderbuses.com" class="btn btn-outline-dark">
        Contact Support
      </a>

      {{/if}}

    </div> <!-- closes settings-card -->
  </div> <!-- closes settings-container -->

</div> <!-- closes settings-page -->
